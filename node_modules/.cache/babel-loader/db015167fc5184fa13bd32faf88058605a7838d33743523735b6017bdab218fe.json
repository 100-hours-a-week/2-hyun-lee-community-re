{"ast":null,"code":"var _jsxFileName = \"/Users/ijuhyeon/Documents/community/2-hyun-lee-community-re/my-react-app/src/components/ProfileImageUpload.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport { fetchUserData } from \"../utils/fetchUserData.js\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProfileImageUpload = ({\n  onImageChange,\n  existingImage\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const [profileImage, setProfileImage] = useState(existingImage || null);\n  const drawPlusSign = (ctx, canvas) => {\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.beginPath();\n    ctx.strokeStyle = \"#ccc\";\n    ctx.lineWidth = 2;\n    ctx.moveTo(canvas.width / 2, canvas.height / 4);\n    ctx.lineTo(canvas.width / 2, 3 * canvas.height / 4);\n    ctx.moveTo(canvas.width / 4, canvas.height / 2);\n    ctx.lineTo(3 * canvas.width / 4, canvas.height / 2);\n    ctx.stroke();\n  };\n  const loadImageToCanvas = imageSrc => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const img = new Image();\n    img.onload = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n    };\n    img.src = imageSrc;\n  };\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = () => {\n        loadImageToCanvas(reader.result);\n        onImageChange(file);\n        setProfileImage(reader.result); // 업데이트된 이미지로 상태 변경\n      };\n      reader.readAsDataURL(file);\n    } else {\n      if (existingImage) {\n        loadImageToCanvas(existingImage);\n        setProfileImage(existingImage); // 기존 이미지 복원\n        onImageChange(null);\n      } else {\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        drawPlusSign(ctx, canvas);\n        onImageChange(null);\n      }\n    }\n  };\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    if (profileImage) {\n      loadImageToCanvas(profileImage); // 프로필 이미지 로드\n    } else if (existingImage) {\n      loadImageToCanvas(existingImage); // 기존 이미지 로드\n    } else {\n      drawPlusSign(ctx, canvas); // 기본 + 기호\n    }\n  }, [profileImage, existingImage]); // 의존성 추가\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Form.Group, {\n      className: \"mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"\\uD504\\uB85C\\uD544 \\uC0AC\\uC9C4*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-upload-wrapper d-flex justify-content-center align-itesms-center\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"profileImage\",\n          className: \"circle\",\n          children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: canvasRef,\n            id: \"profileCanvas\",\n            width: \"100\",\n            height: \"100\",\n            style: {\n              borderRadius: \"50%\",\n              border: \"2px solid #ccc\",\n              cursor: \"pointer\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: handleFileChange,\n        style: {\n          display: \"none\"\n        },\n        id: \"profileImage\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(ProfileImageUpload, \"uCZcfh3RtwEos4bLOCEdxuVRn58=\");\n_c = ProfileImageUpload;\nexport default ProfileImageUpload;\nvar _c;\n$RefreshReg$(_c, \"ProfileImageUpload\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Form","fetchUserData","jsxDEV","_jsxDEV","Fragment","_Fragment","ProfileImageUpload","onImageChange","existingImage","_s","canvasRef","profileImage","setProfileImage","drawPlusSign","ctx","canvas","clearRect","width","height","beginPath","strokeStyle","lineWidth","moveTo","lineTo","stroke","loadImageToCanvas","imageSrc","current","getContext","img","Image","onload","drawImage","src","handleFileChange","e","file","target","files","reader","FileReader","result","readAsDataURL","children","Group","className","Label","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","ref","id","style","borderRadius","border","cursor","Control","type","accept","onChange","display","_c","$RefreshReg$"],"sources":["/Users/ijuhyeon/Documents/community/2-hyun-lee-community-re/my-react-app/src/components/ProfileImageUpload.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport { fetchUserData } from \"../utils/fetchUserData.js\";\n\nconst ProfileImageUpload = ({ onImageChange, existingImage }) => {\n  const canvasRef = useRef(null);\n  const [profileImage, setProfileImage] = useState(existingImage || null);\n\n  const drawPlusSign = (ctx, canvas) => {\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.beginPath();\n\n    ctx.strokeStyle = \"#ccc\";\n    ctx.lineWidth = 2;\n\n    ctx.moveTo(canvas.width / 2, canvas.height / 4);\n    ctx.lineTo(canvas.width / 2, (3 * canvas.height) / 4);\n\n    ctx.moveTo(canvas.width / 4, canvas.height / 2);\n    ctx.lineTo((3 * canvas.width) / 4, canvas.height / 2);\n\n    ctx.stroke();\n  };\n\n  const loadImageToCanvas = (imageSrc) => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n\n    const img = new Image();\n    img.onload = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n    };\n    img.src = imageSrc;\n  };\n\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = () => {\n        loadImageToCanvas(reader.result);\n        onImageChange(file);\n        setProfileImage(reader.result); // 업데이트된 이미지로 상태 변경\n      };\n      reader.readAsDataURL(file);\n    } else {\n      if (existingImage) {\n        loadImageToCanvas(existingImage);\n        setProfileImage(existingImage); // 기존 이미지 복원\n        onImageChange(null);\n      } else {\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext(\"2d\");\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        drawPlusSign(ctx, canvas);\n        onImageChange(null);\n      }\n    }\n  };\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n\n    if (profileImage) {\n      loadImageToCanvas(profileImage); // 프로필 이미지 로드\n    } else if (existingImage) {\n      loadImageToCanvas(existingImage); // 기존 이미지 로드\n    } else {\n      drawPlusSign(ctx, canvas); // 기본 + 기호\n    }\n  }, [profileImage, existingImage]); // 의존성 추가\n\n  return (\n    <>\n      <Form.Group className=\"mb-3\">\n        <Form.Label>프로필 사진*</Form.Label>\n        <div className=\"profile-upload-wrapper d-flex justify-content-center align-itesms-center\">\n          <label htmlFor=\"profileImage\" className=\"circle\">\n            <canvas\n              ref={canvasRef}\n              id=\"profileCanvas\"\n              width=\"100\"\n              height=\"100\"\n              style={{\n                borderRadius: \"50%\",\n                border: \"2px solid #ccc\",\n                cursor: \"pointer\",\n              }}\n            ></canvas>\n          </label>\n        </div>\n        <Form.Control\n          type=\"file\"\n          accept=\"image/*\"\n          onChange={handleFileChange}\n          style={{ display: \"none\" }}\n          id=\"profileImage\"\n        />\n      </Form.Group>\n    </>\n  );\n};\n\nexport default ProfileImageUpload;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}