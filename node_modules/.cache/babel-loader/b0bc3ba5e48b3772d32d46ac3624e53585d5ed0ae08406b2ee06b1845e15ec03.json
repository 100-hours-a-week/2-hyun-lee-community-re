{"ast":null,"code":"var _jsxFileName = \"/Users/ijuhyeon/Documents/community/2-hyun-lee-community-re/my-react-app/src/pages/editUserPassword.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { fetchUserData } from \"../utils/fetchUserData\";\nimport { useNavigate } from \"react-router-dom\";\nimport { validatePassword, validateConfirmPassword } from \"../utils/validators\";\nimport { updateUserPassword, logout } from \"../api/userApi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditUserPassword = () => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [newPasswordError, setNewPasswordError] = useState(\"*비밀번호를 입력해주세요.\");\n  const [confirmPasswordError, setConfirmPasswordError] = useState(\"*비밀번호를 한번 더 입력해주세요.\");\n  const isFormValid = newPassword && !newPasswordError && newPassword && !confirmPasswordError;\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const userInfo = await fetchUserData();\n        if (userInfo && userInfo.userInfo) {\n          setUser(userInfo);\n        }\n      } catch (error) {\n        console.error(\"Error :\", error);\n      }\n    };\n    fetchData();\n  }, []);\n  const handlePasswordChange = e => {\n    const value = e.target.value;\n    setNewPassword(value);\n    const {\n      valid,\n      message\n    } = validatePassword(value);\n    setNewPasswordError(valid ? \"\" : message);\n    if (confirmPassword) {\n      const {\n        valid: confirmValid,\n        message: confirmMessage\n      } = validateConfirmPassword(value, confirmPassword);\n      setConfirmPasswordError(confirmValid ? \"\" : confirmMessage);\n    }\n  };\n  const handleConfirmPasswordChange = e => {\n    const value = e.target.value;\n    setConfirmPassword(value);\n    const {\n      valid,\n      message\n    } = validateConfirmPassword(newPassword, value);\n    setConfirmPasswordError(valid ? \"\" : message);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (isFormValid) {\n      const formData = new FormData();\n      formData.append('password', newPassword);\n      formData.append('confirmPassword', confirmPassword);\n      formData.append('user_id', user.userInfo.user_id);\n      try {\n        const response = await updateUserPassword(formData);\n        if (response) {\n          alert(response.message);\n          const logoutResult = await logout();\n          if (logoutResult.success) {\n            navigate(\"/\");\n          } else {\n            alert(logoutResult.message);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error :\", error);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"edit-password\",\n      children: \"\\uBE44\\uBC00\\uBC88\\uD638\\uC218\\uC815\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"passwordForm\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"password\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: \"\\uBE44\\uBC00\\uBC88\\uD638\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"password\",\n            id: \"password\",\n            placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694\",\n            value: newPassword,\n            onChange: handlePasswordChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this), newPasswordError && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"helper-text error\",\n            children: newPasswordError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 36\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"confirmPassword\",\n            children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"confirmPassword\",\n            id: \"confirmPassword\",\n            placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uD55C\\uBC88 \\uB354 \\uC785\\uB825\\uD558\\uC138\\uC694\",\n            value: confirmPassword,\n            onChange: handleConfirmPasswordChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"edit\",\n        children: [confirmPasswordError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"helper-text error\",\n          children: confirmPasswordError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 38\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          id: \"editBtn\",\n          disabled: !isFormValid,\n          children: \"\\uC218\\uC815\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n};\n_s(EditUserPassword, \"6oZF376cKirvapdS9A7MJ+Gd2hs=\", false, function () {\n  return [useNavigate];\n});\n_c = EditUserPassword;\nexport default EditUserPassword;\nvar _c;\n$RefreshReg$(_c, \"EditUserPassword\");","map":{"version":3,"names":["React","useEffect","useState","fetchUserData","useNavigate","validatePassword","validateConfirmPassword","updateUserPassword","logout","jsxDEV","_jsxDEV","EditUserPassword","_s","user","setUser","newPassword","setNewPassword","confirmPassword","setConfirmPassword","newPasswordError","setNewPasswordError","confirmPasswordError","setConfirmPasswordError","isFormValid","navigate","fetchData","userInfo","error","console","handlePasswordChange","e","value","target","valid","message","confirmValid","confirmMessage","handleConfirmPasswordChange","handleSubmit","preventDefault","formData","FormData","append","user_id","response","alert","logoutResult","success","className","children","fileName","_jsxFileName","lineNumber","columnNumber","id","onSubmit","htmlFor","type","name","placeholder","onChange","disabled","_c","$RefreshReg$"],"sources":["/Users/ijuhyeon/Documents/community/2-hyun-lee-community-re/my-react-app/src/pages/editUserPassword.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { fetchUserData } from \"../utils/fetchUserData\"\nimport { useNavigate } from \"react-router-dom\";\nimport { validatePassword, validateConfirmPassword  } from \"../utils/validators\";\nimport { updateUserPassword, logout } from \"../api/userApi\";\n\nconst EditUserPassword = () =>{\n    const [user, setUser]= useState(null);\n    const [newPassword, setNewPassword] = useState(\"\");\n    const [confirmPassword, setConfirmPassword] = useState(\"\");\n\n    const [newPasswordError, setNewPasswordError] = useState(\"*비밀번호를 입력해주세요.\");\n    const [confirmPasswordError, setConfirmPasswordError] = useState(\"*비밀번호를 한번 더 입력해주세요.\");\n    \n\n    const isFormValid =  newPassword && !newPasswordError && newPassword && !confirmPasswordError;\n\n    const navigate = useNavigate();\n    \n    useEffect (()=>{\n        const fetchData = async ()=>{\n            try {\n                const userInfo = await fetchUserData();\n                if (userInfo && userInfo.userInfo) {\n                    setUser(userInfo);\n                } \n            } catch (error) {\n                console.error(\"Error :\", error);\n            }\n        }\n\n        fetchData();\n    },[]);\n\n    const handlePasswordChange = (e) =>{\n        const value = e.target.value;\n        setNewPassword(value);\n        const { valid, message } = validatePassword(value);\n        setNewPasswordError(valid ? \"\" : message);\n    \n        if (confirmPassword) {\n          const { valid: confirmValid, message: confirmMessage } = validateConfirmPassword(value, confirmPassword);\n          setConfirmPasswordError(confirmValid ? \"\" : confirmMessage);\n        }\n    }\n\n    const handleConfirmPasswordChange = (e) => {\n        const value = e.target.value;\n        setConfirmPassword(value);\n    \n        const { valid, message } = validateConfirmPassword(newPassword, value);\n        setConfirmPasswordError(valid ? \"\" : message);\n      };\n\n    \n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        if(isFormValid){\n            \n            const formData = new FormData();\n            formData.append('password',newPassword);\n            formData.append('confirmPassword',confirmPassword);\n            formData.append('user_id',user.userInfo.user_id);\n\n            try{\n                const response = await updateUserPassword(formData);\n               if(response){\n                    alert(response.message);\n                    \n                    const logoutResult= await logout();\n                    if(logoutResult.success){\n                        navigate(\"/\");\n                    } else{\n                        alert(logoutResult.message);\n                    }\n               }\n            } catch (error) {\n                console.error(\"Error :\", error);\n              }\n        \n        }\n\n    }\n\n\n    return (\n        <div className=\"container\">\n        <h2 className=\"edit-password\">비밀번호수정</h2>\n  \n        <form id=\"passwordForm\" onSubmit={handleSubmit}>\n          <div className=\"password\">\n            <div>\n              <label htmlFor=\"password\">비밀번호</label>\n              <input\n                type=\"password\"\n                name=\"password\"\n                id=\"password\"\n                placeholder=\"비밀번호를 입력하세요\"\n                value={newPassword}\n                onChange={handlePasswordChange}\n              />\n  \n              {newPasswordError && <p className=\"helper-text error\">{newPasswordError}</p>}\n            </div>\n            <div>\n              <label htmlFor=\"confirmPassword\">비밀번호 확인</label>\n              <input\n                type=\"password\"\n                name=\"confirmPassword\"\n                id=\"confirmPassword\"\n                placeholder=\"비밀번호를 한번 더 입력하세요\"\n                value={confirmPassword}\n                onChange={handleConfirmPasswordChange}\n              />\n            </div>\n          </div>\n  \n          <div className=\"edit\">\n            {confirmPasswordError && <p className=\"helper-text error\">{confirmPasswordError}</p>}\n            <button type=\"submit\" id=\"editBtn\" disabled={!isFormValid}>\n              수정하기\n            </button>\n          </div>\n        </form>\n      </div>\n    )\n\n}\n\nexport default EditUserPassword;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}