{"ast":null,"code":"var _jsxFileName = \"/Users/ijuhyeon/Documents/community/2-hyun-lee-community-re/my-react-app/src/components/ProfileImageUpload.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport { fetchUserData } from \"../utils/fetchUserData.js\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProfileImageUpload = ({\n  onImageChange,\n  existingImage\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const [profileImage, setProfileImage] = useState(null);\n  const drawPlusSign = (ctx, canvas) => {\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.beginPath();\n    ctx.strokeStyle = \"#ccc\";\n    ctx.lineWidth = 2;\n    ctx.moveTo(canvas.width / 2, canvas.height / 4);\n    ctx.lineTo(canvas.width / 2, 3 * canvas.height / 4);\n    ctx.moveTo(canvas.width / 4, canvas.height / 2);\n    ctx.lineTo(3 * canvas.width / 4, canvas.height / 2);\n    ctx.stroke();\n  };\n  const loadImageToCanvas = imageSrc => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const img = new Image();\n    img.onload = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n    };\n    img.src = imageSrc;\n  };\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = () => {\n        loadImageToCanvas(reader.result);\n        onImageChange(file);\n      };\n      reader.readAsDataURL(file);\n    } else {\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext(\"2d\");\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      drawPlusSign(ctx, canvas);\n      onImageChange(null);\n    }\n  };\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const fetchData = async () => {\n      try {\n        const userInfo = await fetchUserData();\n        if (userInfo && userInfo.userInfo) {\n          setProfileImage(userInfo.userInfo.profile_image);\n        }\n        if (profileImage) {\n          loadImageToCanvas(profileImage);\n        } else {\n          drawPlusSign(ctx, canvas);\n        }\n      } catch (error) {\n        console.error(\"Error :\", error);\n      }\n    };\n    fetchData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Form.Group, {\n      className: \"mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n        children: \"\\uD504\\uB85C\\uD544 \\uC0AC\\uC9C4*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-upload-wrapper d-flex justify-content-center align-itesms-center\",\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"profileImage\",\n          className: \"circle\",\n          children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: canvasRef,\n            id: \"profileCanvas\",\n            width: \"100\",\n            height: \"100\",\n            style: {\n              borderRadius: \"50%\",\n              border: \"2px solid #ccc\",\n              cursor: \"pointer\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: handleFileChange,\n        style: {\n          display: \"none\"\n        },\n        id: \"profileImage\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(ProfileImageUpload, \"gnSzb7O1VSn10soHnJMxkbDsNG8=\");\n_c = ProfileImageUpload;\nexport default ProfileImageUpload;\nvar _c;\n$RefreshReg$(_c, \"ProfileImageUpload\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Form","fetchUserData","jsxDEV","_jsxDEV","Fragment","_Fragment","ProfileImageUpload","onImageChange","existingImage","_s","canvasRef","profileImage","setProfileImage","drawPlusSign","ctx","canvas","clearRect","width","height","beginPath","strokeStyle","lineWidth","moveTo","lineTo","stroke","loadImageToCanvas","imageSrc","current","getContext","img","Image","onload","drawImage","src","handleFileChange","e","file","target","files","reader","FileReader","result","readAsDataURL","fetchData","userInfo","profile_image","error","console","children","Group","className","Label","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","ref","id","style","borderRadius","border","cursor","Control","type","accept","onChange","display","_c","$RefreshReg$"],"sources":["/Users/ijuhyeon/Documents/community/2-hyun-lee-community-re/my-react-app/src/components/ProfileImageUpload.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport { fetchUserData } from \"../utils/fetchUserData.js\";\n\nconst ProfileImageUpload = ({onImageChange, existingImage}) =>{\n    const canvasRef = useRef(null);\n    const [profileImage, setProfileImage] = useState(null);\n\n    const drawPlusSign = (ctx, canvas) => {\n        ctx.clearRect(0, 0, canvas.width, canvas.height); \n        ctx.beginPath();\n    \n        \n        ctx.strokeStyle = \"#ccc\"; \n        ctx.lineWidth = 2; \n    \n        \n        ctx.moveTo(canvas.width / 2, canvas.height / 4);\n        ctx.lineTo(canvas.width / 2, (3 * canvas.height) / 4);\n    \n        \n        ctx.moveTo(canvas.width / 4, canvas.height / 2);\n        ctx.lineTo((3 * canvas.width) / 4, canvas.height / 2);\n    \n        ctx.stroke(); \n      };\n    \n\n    const loadImageToCanvas = (imageSrc) =>{\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext(\"2d\");\n\n        const img = new Image();\n        img.onload = () =>{\n            ctx.clearRect(0, 0, canvas.width, canvas.height); \n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height); \n        }\n        img.src = imageSrc;\n    }\n\n    const handleFileChange = (e) => {\n        const file = e.target.files[0];\n        if (file) {\n          const reader = new FileReader();\n          reader.onload = () => {\n                loadImageToCanvas(reader.result);\n                onImageChange(file);\n            }\n          reader.readAsDataURL(file);\n        } else {\n            const canvas = canvasRef.current;\n            const ctx = canvas.getContext(\"2d\");\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            drawPlusSign(ctx, canvas);\n            onImageChange(null);\n            }\n            \n            \n    }\n\n\n    useEffect(() => {\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const fetchData = async () =>{\n        try{\n            const userInfo = await fetchUserData();\n            if (userInfo && userInfo.userInfo) {\n                setProfileImage(userInfo.userInfo.profile_image);\n            }\n            if (profileImage) {\n                loadImageToCanvas(profileImage);\n              } else {\n                drawPlusSign(ctx, canvas);\n              } \n        } catch (error) {\n            console.error(\"Error :\", error);\n        }\n    }\n    \n      fetchData();\n    }, []);\n    \n    return (\n    <>\n        <Form.Group className=\"mb-3\" >\n        <Form.Label >프로필 사진*</Form.Label>\n        <div className=\"profile-upload-wrapper d-flex justify-content-center align-itesms-center\">\n        <label htmlFor=\"profileImage\" className=\"circle\">\n        <canvas\n            ref={canvasRef}\n            id=\"profileCanvas\"\n            width=\"100\"\n            height=\"100\"\n            style={{\n            borderRadius: \"50%\",\n            border: \"2px solid #ccc\",\n            cursor: \"pointer\", \n            }}\n        ></canvas>\n        </label>\n        </div>\n        <Form.Control\n            type=\"file\"\n            accept=\"image/*\"\n            onChange={handleFileChange}\n            style={{    display: \"none\",     }}\n            id=\"profileImage\"\n        />\n      </Form.Group>\n    </>\n    )\n}\n\nexport default ProfileImageUpload;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}