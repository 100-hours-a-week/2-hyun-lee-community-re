{"ast":null,"code":"var _jsxFileName = \"/Users/ijuhyeon/Documents/community/2-hyun-lee-community-re/my-react-app/src/pages/editUserPassword.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { fetchUserData } from \"../utils/fetchUserData\";\nimport { useNavigate } from \"react-router-dom\";\nimport { validatePassword, validateConfirmPassword } from \"../utils/validators\";\nimport { updateUserPassword, logout } from \"../api/userApi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditUserPassword = () => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [confirmPasswordError, setConfirmPasswordError] = useState(\"\");\n  const [newPasswordError, setNewPasswordError] = useState(\"\");\n  const isFormValid = newPassword && !newPasswordError && newPassword && !confirmPasswordError;\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const userInfo = await fetchUserData();\n        if (userInfo && userInfo.userInfo) {\n          setUser(userInfo);\n        }\n      } catch (error) {\n        console.error(\"Error :\", error);\n      }\n    };\n    fetchData();\n  }, []);\n  const handlePasswordChange = e => {\n    const value = e.target.value;\n    setNewPassword(value);\n    const {\n      valid,\n      message\n    } = validatePassword(value);\n    setNewPasswordError(valid ? \"\" : message);\n    if (confirmPassword) {\n      const {\n        valid: confirmValid,\n        message: confirmMessage\n      } = validateConfirmPassword(value, confirmPassword);\n      setConfirmPasswordError(confirmValid ? \"\" : confirmMessage);\n    }\n  };\n  const handleConfirmPasswordChange = e => {\n    const value = e.target.value;\n    setConfirmPassword(value);\n    const {\n      valid,\n      message\n    } = validateConfirmPassword(newPassword, value);\n    setConfirmPasswordError(valid ? \"\" : message);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (isFormValid) {\n      const formData = new FormData();\n      formData.append('password', newPassword);\n      formData.append('confirmPassword', confirmPassword);\n      formData.append('user_id', user.userInfo.user_id);\n      try {\n        const response = await updateUserPassword(formData);\n        if (response) {\n          alert(response.message);\n          const logoutResult = await logout();\n          if (logoutResult.success) {\n            navigator(\"/\");\n          } else {\n            alert(logoutResult.message);\n          }\n        }\n      } catch (error) {\n        console.error(\"Error :\", error);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"edit-password\",\n      children: \"\\uBE44\\uBC00\\uBC88\\uD638\\uC218\\uC815\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"passwordForm\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"password\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: \"\\uBE44\\uBC00\\uBC88\\uD638\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"password\",\n            id: \"password\",\n            placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694\",\n            value: newPassword,\n            onChange: handlePasswordChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this), newPasswordError ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"helper-text error\",\n            children: newPasswordError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"helper-text\",\n            id: \"passwordHelper\",\n            children: \"*\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"confirmPassword\",\n            children: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"confirmPassword\",\n            id: \"confirmPassword\",\n            placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uD55C\\uBC88 \\uB354 \\uC785\\uB825\\uD558\\uC138\\uC694\",\n            value: confirmPassword,\n            onChange: handleConfirmPasswordChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"edit\",\n        children: [confirmPasswordError ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"helper-text error\",\n          children: confirmPasswordError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"helper-text\",\n          id: \"confirmPasswordHelper\",\n          children: \"*\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uD55C\\uBC88 \\uB354 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          id: \"editBtn\",\n          disabled: !isFormValid,\n          children: \"\\uC218\\uC815\\uD558\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n};\n_s(EditUserPassword, \"v1MRdstRfKrdaWrKRKHQUJOtvbQ=\");\n_c = EditUserPassword;\nexport default EditUserPassword;\nvar _c;\n$RefreshReg$(_c, \"EditUserPassword\");","map":{"version":3,"names":["React","useEffect","useState","fetchUserData","useNavigate","validatePassword","validateConfirmPassword","updateUserPassword","logout","jsxDEV","_jsxDEV","EditUserPassword","_s","user","setUser","newPassword","setNewPassword","confirmPassword","setConfirmPassword","confirmPasswordError","setConfirmPasswordError","newPasswordError","setNewPasswordError","isFormValid","fetchData","userInfo","error","console","handlePasswordChange","e","value","target","valid","message","confirmValid","confirmMessage","handleConfirmPasswordChange","handleSubmit","preventDefault","formData","FormData","append","user_id","response","alert","logoutResult","success","navigator","className","children","fileName","_jsxFileName","lineNumber","columnNumber","id","onSubmit","htmlFor","type","name","placeholder","onChange","disabled","_c","$RefreshReg$"],"sources":["/Users/ijuhyeon/Documents/community/2-hyun-lee-community-re/my-react-app/src/pages/editUserPassword.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { fetchUserData } from \"../utils/fetchUserData\"\nimport { useNavigate } from \"react-router-dom\";\nimport { validatePassword, validateConfirmPassword  } from \"../utils/validators\";\nimport { updateUserPassword, logout } from \"../api/userApi\";\n\nconst EditUserPassword = () =>{\n    const [user, setUser]= useState(null);\n    const [newPassword, setNewPassword] = useState(\"\");\n    const [confirmPassword, setConfirmPassword] = useState(\"\");\n\n    const [confirmPasswordError, setConfirmPasswordError] = useState(\"\");\n    const [newPasswordError, setNewPasswordError] = useState(\"\");\n\n    const isFormValid =  newPassword && !newPasswordError && newPassword && !confirmPasswordError;\n\n    useEffect (()=>{\n        const fetchData = async ()=>{\n            try {\n                const userInfo = await fetchUserData();\n                if (userInfo && userInfo.userInfo) {\n                    setUser(userInfo);\n                } \n            } catch (error) {\n                console.error(\"Error :\", error);\n            }\n        }\n\n        fetchData();\n    },[]);\n\n    const handlePasswordChange = (e) =>{\n        const value = e.target.value;\n        setNewPassword(value);\n        const { valid, message } = validatePassword(value);\n        setNewPasswordError(valid ? \"\" : message);\n    \n        if (confirmPassword) {\n          const { valid: confirmValid, message: confirmMessage } = validateConfirmPassword(value, confirmPassword);\n          setConfirmPasswordError(confirmValid ? \"\" : confirmMessage);\n        }\n    }\n\n    const handleConfirmPasswordChange = (e) => {\n        const value = e.target.value;\n        setConfirmPassword(value);\n    \n        const { valid, message } = validateConfirmPassword(newPassword, value);\n        setConfirmPasswordError(valid ? \"\" : message);\n      };\n\n    \n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        if(isFormValid){\n            \n            const formData = new FormData();\n            formData.append('password',newPassword);\n            formData.append('confirmPassword',confirmPassword);\n            formData.append('user_id',user.userInfo.user_id);\n\n            try{\n                const response = await updateUserPassword(formData);\n               if(response){\n                    alert(response.message);\n                    \n                    const logoutResult= await logout();\n                    if(logoutResult.success){\n                        navigator(\"/\");\n                    } else{\n                        alert(logoutResult.message);\n                    }\n               }\n            } catch (error) {\n                console.error(\"Error :\", error);\n              }\n        \n        }\n\n    }\n\n\n    return (\n        <div className=\"container\">\n        <h2 className=\"edit-password\">비밀번호수정</h2>\n  \n        <form id=\"passwordForm\" onSubmit={handleSubmit}>\n          <div className=\"password\">\n            <div>\n              <label htmlFor=\"password\">비밀번호</label>\n              <input\n                type=\"password\"\n                name=\"password\"\n                id=\"password\"\n                placeholder=\"비밀번호를 입력하세요\"\n                value={newPassword}\n                onChange={handlePasswordChange}\n              />\n  \n              {newPasswordError ? (\n                <p className=\"helper-text error\">{newPasswordError}</p>\n              ) : (\n                <p className=\"helper-text\" id=\"passwordHelper\">\n                  *비밀번호를 입력해주세요.\n                </p>\n              )}\n            </div>\n            <div>\n              <label htmlFor=\"confirmPassword\">비밀번호 확인</label>\n              <input\n                type=\"password\"\n                name=\"confirmPassword\"\n                id=\"confirmPassword\"\n                placeholder=\"비밀번호를 한번 더 입력하세요\"\n                value={confirmPassword}\n                onChange={handleConfirmPasswordChange}\n              />\n            </div>\n          </div>\n  \n          <div className=\"edit\">\n            {confirmPasswordError ? (\n              <p className=\"helper-text error\">{confirmPasswordError}</p>\n            ) : (\n              <p className=\"helper-text\" id=\"confirmPasswordHelper\">\n                *비밀번호를 한번 더 입력해주세요.\n              </p>\n            )}\n            <button type=\"submit\" id=\"editBtn\" disabled={!isFormValid}>\n              수정하기\n            </button>\n          </div>\n        </form>\n      </div>\n    )\n\n}\n\nexport default EditUserPassword;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}